To enable a third-party crawler (like a custom script or bot) to crawl an entire Moodle website, especially beyond the login page and deep into course content, several Moodle admin settings and technical considerations must be addressed. Here's a breakdown:

âœ… 1. Login Access for the Crawler
Most of Moodle is restricted behind authentication. Youâ€™ll need:

âœ… Option A: Create a Read-Only "Crawler" User
Go to: Site administration â†’ Users â†’ Accounts â†’ Add a new user.

Create a dedicated user with access to the courses you want to crawl.

Optionally assign a custom role with view-only permissions.

âœ… Option B: Use a Token or Session Cookie
If your crawler uses an API or browser automation (like Selenium), you may need to:

Log in and use the session cookie.

Or generate a web service token (see API note below).

âœ… 2. Role Permissions and Course Visibility
Make sure your crawler user:

Has permission to view course content.

Is enrolled in the courses or has a system role that can view them.

Can see activities, files, forums, and other content (check hidden modules).

To check:

Site administration â†’ Users â†’ Permissions â†’ Define roles.

Create a custom "Crawler Viewer" role or modify an existing role.

Capabilities to grant:

moodle/course:view

moodle/course:viewhiddensections (if needed)

mod/resource:view

mod/page:view

mod/url:view

mod/book:view

âœ… 3. Site Navigation and Link Structure
Make sure:

"Force login" is disabled if public crawling is needed.
(Site administration â†’ Security â†’ Site policies â†’ Uncheck Force users to log in.)

All pages you want crawled are linked and not orphaned.

If your courses are set to â€œHiddenâ€ or â€œGuest access onlyâ€ and your crawler isnâ€™t logged in, it wonâ€™t see them.

âœ… 4. Guest Access (Optional)
Enable guest access if you want public crawling without login:

Site administration â†’ Plugins â†’ Authentication â†’ Manage authentication â†’ Enable Guest access.

For each course:

Go to Course settings â†’ Users â†’ Enrollment methods.

Enable Guest access.

Configure guest role permissions to allow viewing course contents.

âœ… 5. Performance & Crawl Restrictions
If you plan heavy crawling:

Rate limit your crawler to avoid overloading Moodle.

Consider a crawler that respects robots.txt, or implement access control in your bot.

âœ… 6. API Access (Alternative to Crawling)
Instead of HTML crawling, you could:

Use Moodleâ€™s Web Services API.

Generate a token via:

Site administration â†’ Server â†’ Web services â†’ Manage tokens.

Useful functions:

core_course_get_courses

core_course_get_contents

mod_resource_get_resources_by_courses

More info: Moodle Web Service API docs

âœ… Summary Checklist
Setting	Description
ğŸ”’ User Auth	Create crawler user or enable guest access
ğŸ‘€ Role Permissions	Grant view permissions for relevant modules
ğŸ“˜ Course Visibility	Enroll user or open courses to guests
ğŸŒ Site Access	Disable "Force login" if public crawl
ğŸ§  Structure	Ensure all content is navigable by links
âš™ï¸ API (Optional)	Use Moodleâ€™s official web services for structured access